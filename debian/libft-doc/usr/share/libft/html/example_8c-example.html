<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libft: example.c</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>example.c</h1><div class="fragment"><pre class="fragment">
<span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;usb.h&gt;</span>
<span class="preprocessor">#include "<a class="code" href="ftlib_8h.html">ftlib.h</a>"</span>

<span class="keywordtype">int</span> main() {
        <a name="_a0"></a><a class="code" href="structft__handle__devices.html" title="Handle for the ft Interface.">FT_HANDLE</a> hFt = NULL;
        <a name="_a1"></a><a class="code" href="struct__FT__TRANSFER__AREA.html" title="Communication Area for ft-Device.">FT_TRANSFER_AREA</a> *transfer_area = NULL;

        <span class="comment">// Get List of USB devices</span>
        <a name="a2"></a><a class="code" href="libft_8c.html#ed4425f7bf5af88e801fc7e0ee33145c" title="Initiates and scans the USB bus.">InitFtUsbDeviceList</a>();

        <span class="comment">// Get Number of usb devices</span>
        printf(<span class="stringliteral">"Found %d ft USB devices\n"</span>, <a name="a3"></a><a class="code" href="libft_8c.html#a0ec986b7cb4aa0b44f385ed5b84c5b0" title="Get the count of found ft Interfaces over USB.">GetNumFtUsbDevice</a>());

        <span class="comment">// Get handle on a device</span>
        hFt = <a name="a4"></a><a class="code" href="libft_8c.html#af9b946b707508d23b8f845c5e3e4b52" title="Gets the handle to a ft USB device.">GetFtUsbDeviceHandle</a>(0);

        <span class="comment">// Open connection</span>
        <a name="a5"></a><a class="code" href="libft_8c.html#e361b67652044c48c2db21ae7e85f022" title="Opens this USB device.">OpenFtUsbDevice</a>(hFt);

        <a name="a6"></a><a class="code" href="libft_8c.html#1297b4b28c8eaf49ff4f652f85375afa" title="Starts the communication thread.">StartFtTransferArea</a>(hFt, NULL);
        transfer_area = <a name="a7"></a><a class="code" href="libft_8c.html#8d0eff74fa3012717a35df1f189f38fe" title="Get the transfer area.">GetFtTransferAreaAddress</a>(hFt);
        <span class="keywordflow">if</span> (transfer_area) {
                transfer_area-&gt;<a name="a8"></a><a class="code" href="struct__FT__TRANSFER__AREA.html#5d1ce2bf1dca4aac32460fa9aa61db39" title="Outputs of the main module (PWM values, range =0..7).">MPWM_Main</a>[0] = 7; <span class="comment">// PWM Motor 1</span>
                transfer_area-&gt;<a class="code" href="struct__FT__TRANSFER__AREA.html#5d1ce2bf1dca4aac32460fa9aa61db39" title="Outputs of the main module (PWM values, range =0..7).">MPWM_Main</a>[1] = 1;
                transfer_area-&gt;<a name="a9"></a><a class="code" href="struct__FT__TRANSFER__AREA.html#57a329c3d288460347f6bc7b8bbf3e03" title="Outputs of the main module ( polarity ).">M_Main</a> = 2; <span class="comment">// Motor 1 right</span>
                sleep(2);
                transfer_area-&gt;<a class="code" href="struct__FT__TRANSFER__AREA.html#57a329c3d288460347f6bc7b8bbf3e03" title="Outputs of the main module ( polarity ).">M_Main</a> = 1; <span class="comment">// Motor 1 left</span>
                <span class="keywordflow">do</span> {
                        printf(<span class="stringliteral">"End 1: %d\n"</span>, transfer_area-&gt;<a name="a10"></a><a class="code" href="struct__FT__TRANSFER__AREA.html#abbc380f1df2198d04b409f48c487100" title="Digital Inputs Main Module Base+0x00: | E8 | E7 | E6 | E5 | E4 | E3 | E2 | E1 |.">E_Main</a> &amp; 0x1); <span class="comment">// Digital Input 1</span>
                        usleep(10000);
                } <span class="keywordflow">while</span>(!(transfer_area-&gt;<a class="code" href="struct__FT__TRANSFER__AREA.html#abbc380f1df2198d04b409f48c487100" title="Digital Inputs Main Module Base+0x00: | E8 | E7 | E6 | E5 | E4 | E3 | E2 | E1 |.">E_Main</a> &amp; 0x1)); <span class="comment">// stop when end = 1</span>
                printf(<span class="stringliteral">"End 1: %d\n"</span>, transfer_area-&gt;<a class="code" href="struct__FT__TRANSFER__AREA.html#abbc380f1df2198d04b409f48c487100" title="Digital Inputs Main Module Base+0x00: | E8 | E7 | E6 | E5 | E4 | E3 | E2 | E1 |.">E_Main</a> &amp; 0x1); <span class="comment">// Digital Input 1</span>
                transfer_area-&gt;<a class="code" href="struct__FT__TRANSFER__AREA.html#57a329c3d288460347f6bc7b8bbf3e03" title="Outputs of the main module ( polarity ).">M_Main</a> = 0;
        }
        <a name="a11"></a><a class="code" href="libft_8c.html#342c3f11bd16069ac3bda07cb2aa18c2" title="Stops the communication thread.">StopFtTransferArea</a>(hFt);
        
        <span class="comment">// Close connection</span>
        <a name="a12"></a><a class="code" href="libft_8c.html#a0cc680a0e4bcf1b95ff682a3e44b29c" title="Close the ft Device.">CloseFtDevice</a>(hFt);

        <span class="keywordflow">return</span> 0;
}

</pre></div> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Aug 24 16:39:44 2008 for libft by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
